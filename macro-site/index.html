<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Country Macro Viewer | Global Trade & GDP</title>
<link rel="icon" type="image/svg+xml" href="../favicon.svg">
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<script src="../data/country-macro-map.js"></script>
<link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="macroLoading">
    <div class="spinner"></div>
    <div class="text">Loading country macro data...</div>
  </div>

  <div id="macroTop">
    <div id="macroTitle">
      <span class="logoWrap">
        <img src="../assets/monarch-logo.png" alt="Monarch Castle Technologies logo" class="logoImage">
      </span>
      <span class="name">Monarch Castle Technologies</span>
      <span class="sep">|</span>
      <span class="tagline">Country Macro Intelligence</span>
    </div>
    <div class="stats" id="macroStats">
      <div class="stat">
        <span>Countries</span>
        <b id="statCountries">0</b>
      </div>
      <div class="stat">
        <span>Trade Links</span>
        <b id="statLinks">0</b>
      </div>
      <div class="stat">
        <span>Total GDP</span>
        <b id="statGdp">$0T</b>
      </div>
    </div>
  </div>

  <div id="macroBar">
    <button id="btnYear" type="button" aria-label="Cycle available years">Year: 2024</button>
    <button id="btnDirection" type="button" aria-label="Cycle trade direction filter">Direction: Both</button>
    <button id="btnThreshold" type="button" aria-label="Cycle minimum trade threshold">Min Trade: $1B</button>
    <div class="sep"></div>
    <button id="btnBloc" type="button" aria-label="Open trade bloc filters">Bloc: Global</button>
    <button id="btnSector" type="button" aria-label="Open sector filters">Sectors</button>
    <button id="btnReset" type="button" aria-label="Reset all filters and selection">Reset</button>
  </div>

  <div id="macroSearchWrap">
    <input type="text" id="macroSearch" placeholder="Search country..." autocomplete="off" aria-label="Search countries">
    <div id="macroSearchSuggest"></div>
  </div>

  <div id="macroDetail" role="region" aria-label="Country details panel">
    <div class="detailHeader">
      <div class="detailFlag" id="detailFlag"></div>
      <div class="detailName" id="detailName">Select a country</div>
      <div class="detailIso" id="detailIso"></div>
    </div>
    <div class="detailStats" id="detailStats">
      <div class="detailStat">
        <span class="label">GDP</span>
        <b id="detailGdp">-</b>
      </div>
      <div class="detailStat">
        <span class="label">Exports</span>
        <b id="detailExports">-</b>
      </div>
      <div class="detailStat">
        <span class="label">Imports</span>
        <b id="detailImports">-</b>
      </div>
      <div class="detailStat">
        <span class="label">Trade Balance</span>
        <b id="detailBalance">-</b>
      </div>
    </div>
    <div class="detailSection">
      <div class="sectionTitle">Top Trade Partners</div>
      <div class="partnerList" id="detailPartners"></div>
    </div>
    <div class="detailSection">
      <div class="sectionTitle">Sector Exposure</div>
      <div class="sectorList" id="detailSectors"></div>
    </div>
    <div class="detailSection">
      <div class="sectionTitle">Trade Blocs</div>
      <div class="sectorList" id="detailBlocs"></div>
    </div>
    <div class="detailSection">
      <div class="sectionTitle">Data Provenance</div>
      <div class="sectorList" id="detailProvenance"></div>
    </div>
  </div>

  <div id="macroTop10" role="region" aria-label="Top ten producers panel">
    <div class="top10Header">
      <span class="top10Title">Top 10 Producers</span>
      <select id="top10Sector">
        <option value="all" selected>Default View</option>
        <option value="medicine">Medicine</option>
        <option value="electronics">Electronics</option>
        <option value="automotive">Automotive</option>
        <option value="energy">Energy</option>
        <option value="agriculture">Agriculture</option>
        <option value="textiles">Textiles</option>
        <option value="metals">Metals</option>
        <option value="chemicals">Chemicals</option>
      </select>
    </div>
    <div class="top10List" id="top10List"></div>
  </div>

  <div id="macroViz"></div>

  <div id="macroTooltip" class="tooltip">
    <div class="tooltipName" id="tooltipName"></div>
    <div class="tooltipGdp" id="tooltipGdp"></div>
    <div class="tooltipTrade" id="tooltipTrade"></div>
  </div>

  <div id="macroFooter">
    <span class="updateStatus">
      <span class="statusDot fresh"></span>
      <span id="lastUpdated">Last updated: -</span>
    </span>
  </div>

  <div id="sectorFilterPanel">
    <h3>Sector Filter</h3>
    <div class="sectorChips" id="sectorChips"></div>
    <div class="filterActions">
      <button id="applySectorFilter" type="button" aria-label="Apply sector filter">Apply</button>
      <button id="clearSectorFilter" type="button" aria-label="Clear sector filter">Clear</button>
    </div>
  </div>

  <div id="blocFilterPanel">
    <h3>Trade Blocs (Multi-select)</h3>
    <div class="blocChips" id="blocChips"></div>
    <div class="filterSelectRow">
      <label for="blocMode">Member Mode</label>
      <select id="blocMode" aria-label="Bloc member combination mode">
        <option value="union">Union (A U B)</option>
        <option value="intersection">Intersection (A n B)</option>
      </select>
    </div>
    <div class="filterSelectRow">
      <label for="blocEdgeScope">Edge Scope</label>
      <select id="blocEdgeScope" aria-label="Bloc edge inclusion scope">
        <option value="touching">Touching links</option>
        <option value="internal">Internal only</option>
      </select>
    </div>
    <div class="filterHint">Tip: pick one or more blocs, then apply.</div>
    <div class="filterActions">
      <button id="applyBlocFilter" type="button" aria-label="Apply bloc filters">Apply</button>
      <button id="clearBlocFilter" type="button" aria-label="Clear bloc filters">Clear</button>
    </div>
  </div>

  <script src="app.js?v=20260225-default-lens"></script>
</body>
</html>
